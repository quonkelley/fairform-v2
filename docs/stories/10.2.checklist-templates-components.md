# Story 10.2: Checklist Templates & Components

## Status: Draft

## Story

As a **FairForm user preparing for court**,
I want **a comprehensive checklist with categorized tasks specific to my case type**,
So that **I know exactly what to bring, what to do, and what to expect on my court date**.

## Context Source

- Source Document: Epic 10 PRD (Day-in-Court Checklist)
- Enhancement Type: Checklist templates and component system
- Existing System Impact: Adds checklist content and rendering system to existing page scaffold

## Acceptance Criteria

### Functional Requirements

1. **Checklist Templates**: Create static templates for Small Claims and Family Law case types
2. **Category Structure**: Organize checklist items into logical categories (Before You Go, Bring These Items, etc.)
3. **Component System**: Build reusable components for checklist rendering
4. **Template Selection**: Load correct template based on case type from Epic 6.5

### Technical Requirements

5. **Template Data Structure**: Define consistent template format for checklist items
6. **Component Props**: Create properly typed component interfaces
7. **Template Registry**: Create registry system similar to Epic 6.5 journey templates
8. **Extensibility**: Template structure ready for additional case types

### Quality Requirements

9. **Accessibility**: Checklist items meet WCAG 2.1 AA standards
10. **Performance**: Template loading and rendering ≤ 100ms
11. **Testing**: Unit tests for components and template registry

## Tasks / Subtasks

- [ ] **Task 1**: Create checklist template data structure
  - [ ] Define checklist template interface
  - [ ] Create category and item data structures
  - [ ] Add TypeScript types for templates
  - [ ] Document template format

- [ ] **Task 2**: Build Small Claims checklist template
  - [ ] Define "Before You Go" category with tasks
  - [ ] Define "Bring These Items" category
  - [ ] Define "At the Courthouse" category
  - [ ] Define "During Your Hearing" category
  - [ ] Add helpful tips and notes

- [ ] **Task 3**: Build Family Law checklist template (stub)
  - [ ] Create basic Family Law template structure
  - [ ] Add placeholder categories
  - [ ] Document for future enhancement

- [ ] **Task 4**: Create checklist component system
  - [ ] Build ChecklistCategory component
  - [ ] Build ChecklistItem component
  - [ ] Build ChecklistPage main component
  - [ ] Add proper accessibility attributes

- [ ] **Task 5**: Integrate with case type from Epic 6.5
  - [ ] Connect to case type from case data
  - [ ] Load correct template based on case type
  - [ ] Handle unknown case types gracefully
  - [ ] Add fallback template

- [ ] **Task 6**: Add comprehensive testing
  - [ ] Unit tests for template registry
  - [ ] Component tests for checklist rendering
  - [ ] Template selection logic tests
  - [ ] Accessibility tests for components

## Dev Notes

### Previous Story Context

This story builds on:
- Story 10.1: Checklist page scaffold with routing
- Epic 6.5: Case type classification and template system

### Technical Implementation

**Checklist Template Structure:**
```typescript
// lib/checklist/templates/index.ts
export interface ChecklistItem {
  id: string;
  text: string;
  description?: string;
  priority?: 'high' | 'medium' | 'low';
}

export interface ChecklistCategory {
  id: string;
  title: string;
  description?: string;
  items: ChecklistItem[];
}

export interface ChecklistTemplate {
  caseType: CaseType;
  title: string;
  description: string;
  categories: ChecklistCategory[];
}

export const checklistTemplates: Record<CaseType, ChecklistTemplate> = {
  small_claims: {
    caseType: 'small_claims',
    title: 'Small Claims Court Checklist',
    description: 'Essential preparation for your small claims hearing',
    categories: [
      {
        id: 'before-you-go',
        title: 'Before You Go',
        description: 'Complete these tasks before your court date',
        items: [
          {
            id: 'review-case',
            text: 'Review your entire case file and all documents',
            priority: 'high'
          },
          {
            id: 'organize-evidence',
            text: 'Organize your evidence in chronological order',
            priority: 'high'
          },
          {
            id: 'prepare-statement',
            text: 'Prepare a brief opening statement (2-3 minutes)',
            priority: 'high'
          },
          {
            id: 'practice-testimony',
            text: 'Practice presenting your case out loud',
            priority: 'medium'
          },
          {
            id: 'plan-arrival',
            text: 'Plan to arrive 30 minutes early',
            priority: 'high'
          }
        ]
      },
      {
        id: 'bring-these-items',
        title: 'Bring These Items',
        description: 'Essential documents and materials',
        items: [
          {
            id: 'photo-id',
            text: 'Valid photo ID (driver\'s license or passport)',
            priority: 'high'
          },
          {
            id: 'court-notice',
            text: 'Court hearing notice with date, time, and courtroom',
            priority: 'high'
          },
          {
            id: 'case-documents',
            text: 'All filed documents (claim, response, evidence)',
            priority: 'high'
          },
          {
            id: 'copies',
            text: 'Extra copies of all documents (3 sets minimum)',
            priority: 'high'
          },
          {
            id: 'notebook',
            text: 'Notebook and pen for taking notes',
            priority: 'medium'
          },
          {
            id: 'evidence',
            text: 'Physical evidence (photos, receipts, contracts)',
            priority: 'high'
          }
        ]
      },
      {
        id: 'at-courthouse',
        title: 'At the Courthouse',
        description: 'When you arrive',
        items: [
          {
            id: 'find-courtroom',
            text: 'Find your assigned courtroom',
            priority: 'high'
          },
          {
            id: 'check-in',
            text: 'Check in with the clerk',
            priority: 'high'
          },
          {
            id: 'turn-off-phone',
            text: 'Turn off or silence your cell phone',
            priority: 'high'
          },
          {
            id: 'observe-courtroom',
            text: 'Observe another case if time permits',
            priority: 'low'
          }
        ]
      },
      {
        id: 'during-hearing',
        title: 'During Your Hearing',
        description: 'Remember these important points',
        items: [
          {
            id: 'stand-when-judge',
            text: 'Stand when the judge enters or addresses you',
            priority: 'high'
          },
          {
            id: 'address-judge',
            text: 'Address the judge as "Your Honor"',
            priority: 'high'
          },
          {
            id: 'speak-clearly',
            text: 'Speak clearly and directly to the judge',
            priority: 'high'
          },
          {
            id: 'stay-calm',
            text: 'Stay calm and respectful, even if frustrated',
            priority: 'high'
          },
          {
            id: 'listen-carefully',
            text: 'Listen carefully to all questions before answering',
            priority: 'high'
          }
        ]
      }
    ]
  },
  // Stub for other case types
  employment: {
    caseType: 'employment',
    title: 'Employment Case Checklist',
    description: 'Coming soon',
    categories: []
  },
  housing: {
    caseType: 'housing',
    title: 'Housing Case Checklist',
    description: 'Coming soon',
    categories: []
  },
  // ... other case types
};
```

**ChecklistCategory Component:**
```typescript
// components/checklist/checklist-category.tsx
interface ChecklistCategoryProps {
  category: ChecklistCategory;
  completedItems: Set<string>;
  onToggleItem: (itemId: string) => void;
}

export function ChecklistCategory({ 
  category, 
  completedItems, 
  onToggleItem 
}: ChecklistCategoryProps) {
  return (
    <div className="space-y-4">
      <div>
        <h2 className="text-xl font-semibold text-foreground">
          {category.title}
        </h2>
        {category.description && (
          <p className="text-sm text-muted-foreground">
            {category.description}
          </p>
        )}
      </div>
      
      <ul className="space-y-2" role="list">
        {category.items.map((item) => (
          <ChecklistItem
            key={item.id}
            item={item}
            isCompleted={completedItems.has(item.id)}
            onToggle={() => onToggleItem(item.id)}
          />
        ))}
      </ul>
    </div>
  );
}
```

**ChecklistItem Component:**
```typescript
// components/checklist/checklist-item.tsx
import { Checkbox } from "@/components/ui/checkbox";
import { Label } from "@/components/ui/label";

interface ChecklistItemProps {
  item: ChecklistItem;
  isCompleted: boolean;
  onToggle: () => void;
}

export function ChecklistItem({ item, isCompleted, onToggle }: ChecklistItemProps) {
  const priorityColor = {
    high: 'text-destructive',
    medium: 'text-warning',
    low: 'text-muted-foreground'
  }[item.priority || 'medium'];

  return (
    <li className="flex items-start gap-3 rounded-lg border border-border bg-card p-4 transition-colors hover:bg-accent">
      <Checkbox
        id={item.id}
        checked={isCompleted}
        onCheckedChange={onToggle}
        aria-label={`Mark "${item.text}" as ${isCompleted ? 'incomplete' : 'complete'}`}
      />
      <div className="flex-1 space-y-1">
        <Label
          htmlFor={item.id}
          className={`cursor-pointer text-sm font-medium ${
            isCompleted ? 'text-muted-foreground line-through' : 'text-foreground'
          }`}
        >
          {item.text}
        </Label>
        {item.description && (
          <p className="text-xs text-muted-foreground">
            {item.description}
          </p>
        )}
      </div>
      {item.priority === 'high' && !isCompleted && (
        <span className="text-xs font-medium text-destructive">Essential</span>
      )}
    </li>
  );
}
```

### File Locations

**New Files:**
- `lib/checklist/templates/index.ts` - Checklist template registry
- `components/checklist/checklist-category.tsx` - Category component
- `components/checklist/checklist-item.tsx` - Item component
- `tests/lib/checklist/templates.test.ts` - Template tests
- `tests/components/checklist/checklist-category.test.tsx` - Category tests
- `tests/components/checklist/checklist-item.test.tsx` - Item tests

**Modified Files:**
- `app/cases/[id]/checklist/page.tsx` - Integrate checklist components

### Design System Integration

- Uses shadcn/ui Checkbox and Label components
- Follows established Card and spacing patterns
- Maintains consistent typography and color scheme
- Uses priority colors for visual hierarchy

### Accessibility Requirements

- Checklist items have proper checkbox semantics
- Labels are associated with checkboxes
- Keyboard navigation works for all items
- Screen readers announce completion status
- Color contrast meets WCAG 2.1 AA standards

### Testing Requirements

**Unit Tests:**
- Template registry structure validation
- Template selection logic
- Component prop handling

**Component Tests:**
- ChecklistCategory rendering
- ChecklistItem interactions
- Checkbox toggle behavior

**Integration Tests:**
- Template loading based on case type
- Component integration with page
- State management for completed items

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4

### Debug Log References
- Checklist template creation
- Component development and styling
- Template registry implementation

### Completion Notes List
- Small Claims checklist template created with 4 categories
- ChecklistCategory and ChecklistItem components built
- Template registry system established
- Case type integration prepared

### File List
**New Files:**
- `lib/checklist/templates/index.ts` - Checklist template registry
- `components/checklist/checklist-category.tsx` - Category component
- `components/checklist/checklist-item.tsx` - Item component
- `tests/lib/checklist/templates.test.ts` - Template tests
- `tests/components/checklist/checklist-category.test.tsx` - Category tests
- `tests/components/checklist/checklist-item.test.tsx` - Item tests

**Modified Files:**
- `app/cases/[id]/checklist/page.tsx` - Integrate checklist components

### Change Log
**2025-10-10**: Initial story creation for Epic 10 checklist templates
- Created Small Claims checklist template with comprehensive categories
- Built reusable checklist component system
- Established template registry for extensibility

## Testing

### Test Strategy
- Unit tests for template registry and selection logic
- Component tests for checklist rendering and interactions
- Integration tests with case type system
- Accessibility tests for checkbox interactions

### Test Coverage Targets
- Template registry: 100% line coverage
- Checklist components: 100% line coverage
- Template selection: 100% path coverage

### Accessibility Testing
- Checkbox ARIA labels and roles
- Keyboard navigation testing
- Screen reader announcement testing
- Color contrast verification

### Performance Testing
- Template loading benchmarks (≤ 100ms)
- Component rendering performance
- List virtualization for large checklists (future)

## QA Results

*To be completed after implementation*

---

**Story Owner:** SM (Bob)  
**Created:** October 10, 2025  
**Epic:** 10 Day-in-Court Checklist  
**Estimated Effort:** 1 day  
**Dependencies:** Story 10.1 complete, Epic 6.5 case type support
