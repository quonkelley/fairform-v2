# Story 10.1: Checklist Page Scaffold & Routing

## Status: Draft

## Story

As a **FairForm user preparing for my court date**,
I want **a dedicated checklist page accessible from my case dashboard**,
So that **I can navigate to a focused preparation area before my hearing**.

## Context Source

- Source Document: Epic 10 PRD (Day-in-Court Checklist)
- Enhancement Type: New page and routing foundation
- Existing System Impact: Adds new checklist route while preserving existing case detail functionality

## Acceptance Criteria

### Functional Requirements

1. **Checklist Route**: Create `/app/cases/[id]/checklist/page.tsx` route
2. **Page Layout**: Implement basic page structure with header and navigation
3. **Breadcrumb Navigation**: Add breadcrumb trail from Dashboard → Case Details → Checklist
4. **Page Header**: Display "Day-in-Court Checklist" with case context
5. **Link Integration**: Add checklist link from Case Dashboard and Case Journey Map

### Technical Requirements

6. **Route Protection**: Ensure route is protected and requires authentication
7. **Case ID Validation**: Validate case ID from route params
8. **Error Handling**: Handle invalid case IDs and missing cases gracefully
9. **Mobile-First Layout**: Implement responsive layout for mobile devices

### Quality Requirements

10. **Accessibility**: Zero WCAG 2.1 AA violations on page scaffold
11. **Performance**: Page shell loads ≤ 500ms
12. **Testing**: Component tests for routing and navigation

## Tasks / Subtasks

- [ ] **Task 1**: Create checklist page route and basic structure
  - [ ] Create `/app/cases/[id]/checklist/page.tsx` file
  - [ ] Add protected route wrapper
  - [ ] Implement case ID validation
  - [ ] Add error boundary for invalid cases

- [ ] **Task 2**: Implement page layout and navigation
  - [ ] Add breadcrumb navigation component
  - [ ] Create page header with case context
  - [ ] Implement responsive mobile-first layout
  - [ ] Add back navigation to case details

- [ ] **Task 3**: Add checklist links to existing pages
  - [ ] Add checklist button to Case Dashboard card
  - [ ] Add checklist link to Case Journey Map
  - [ ] Style links with consistent design system
  - [ ] Add proper accessibility labels

- [ ] **Task 4**: Add comprehensive testing
  - [ ] Unit tests for route validation
  - [ ] Component tests for page structure
  - [ ] Navigation tests for breadcrumbs
  - [ ] Accessibility tests for page scaffold

## Dev Notes

### Previous Story Context

This story builds on Epic 6 foundation:
- Case Dashboard (Epic 2) - provides entry point for checklist link
- Case Journey Map (Epic 6) - provides secondary entry point
- Epic 6.5 Case Detail V2 - provides case type context for checklist

### Technical Implementation

**Checklist Route:**
```typescript
// app/cases/[id]/checklist/page.tsx
"use client";

import Link from "next/link";
import { ChevronRight, ClipboardList } from "lucide-react";
import { ProtectedRoute } from "@/components/auth/protected-route";

interface ChecklistPageProps {
  params: {
    id: string;
  };
}

export default function ChecklistPage({ params }: ChecklistPageProps) {
  const caseId = params.id;

  return (
    <ProtectedRoute>
      <div className="mx-auto flex min-h-screen w-full max-w-4xl flex-col gap-8 px-6 py-8">
        {/* Breadcrumb Navigation */}
        <nav aria-label="Breadcrumb" className="flex items-center gap-2 text-sm">
          <Link
            href="/dashboard"
            className="text-muted-foreground transition-colors hover:text-foreground"
          >
            Dashboard
          </Link>
          <ChevronRight className="h-4 w-4 text-muted-foreground" />
          <Link
            href={`/cases/${caseId}`}
            className="text-muted-foreground transition-colors hover:text-foreground"
          >
            Case Details
          </Link>
          <ChevronRight className="h-4 w-4 text-muted-foreground" />
          <span className="font-medium text-foreground">Day-in-Court Checklist</span>
        </nav>

        {/* Page Header */}
        <header className="space-y-2">
          <div className="flex items-center gap-3">
            <ClipboardList className="h-8 w-8 text-primary" />
            <h1 className="text-3xl font-bold text-foreground">
              Day-in-Court Checklist
            </h1>
          </div>
          <p className="text-base text-muted-foreground">
            Make sure you're prepared for your court date with this step-by-step checklist.
          </p>
        </header>

        {/* Checklist Content (to be added in next stories) */}
        <main>
          {/* Story 10.2 will add checklist components here */}
        </main>
      </div>
    </ProtectedRoute>
  );
}
```

**Dashboard Link Integration:**
```typescript
// components/dashboard/case-card.tsx
// Add checklist button to actions
<Button
  variant="outline"
  size="sm"
  onClick={() => router.push(`/cases/${caseId}/checklist`)}
>
  <ClipboardList className="mr-2 h-4 w-4" />
  Court Prep Checklist
</Button>
```

**Journey Map Link Integration:**
```typescript
// components/case-journey/case-journey-map.tsx
// Add checklist link in header or action area
<Link
  href={`/cases/${caseId}/checklist`}
  className="inline-flex items-center gap-2 text-sm font-medium text-primary hover:underline"
>
  <ClipboardList className="h-4 w-4" />
  View Day-in-Court Checklist
</Link>
```

### File Locations

**New Files:**
- `app/cases/[id]/checklist/page.tsx` - Checklist page route
- `tests/app/cases/[id]/checklist/page.test.tsx` - Page tests

**Modified Files:**
- `components/dashboard/case-card.tsx` - Add checklist button
- `components/case-journey/case-journey-map.tsx` - Add checklist link

### Design System Integration

- Uses shadcn/ui Button and Link components
- Follows established breadcrumb navigation pattern
- Uses consistent spacing (gap-8, px-6, py-8)
- Maintains existing page header styling

### Accessibility Requirements

- Breadcrumb navigation with proper ARIA labels
- Page title is h1 for screen readers
- Checklist links have descriptive text and icons
- Keyboard navigation works throughout page
- Color contrast meets WCAG 2.1 AA standards

### Testing Requirements

**Unit Tests:**
- Route param validation
- Case ID extraction
- Protected route behavior

**Component Tests:**
- Page structure rendering
- Breadcrumb navigation
- Link integration from dashboard and journey map

**Integration Tests:**
- Navigation flow from dashboard to checklist
- Navigation flow from case journey to checklist
- Back navigation to case details

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4

### Debug Log References
- Checklist route implementation
- Navigation link integration
- Protected route testing

### Completion Notes List
- Checklist page route created with protected authentication
- Breadcrumb navigation implemented with proper accessibility
- Checklist links added to dashboard and journey map
- Mobile-first responsive layout foundation established

### File List
**New Files:**
- `app/cases/[id]/checklist/page.tsx` - Checklist page route
- `tests/app/cases/[id]/checklist/page.test.tsx` - Page tests

**Modified Files:**
- `components/dashboard/case-card.tsx` - Checklist button added
- `components/case-journey/case-journey-map.tsx` - Checklist link added

### Change Log
**2025-10-10**: Initial story creation for Epic 10 checklist page scaffold
- Created checklist route with protected authentication
- Implemented breadcrumb navigation
- Added checklist links to dashboard and journey map

## Testing

### Test Strategy
- Unit tests for route validation and case ID handling
- Component tests for page structure and navigation
- Integration tests for navigation flow
- Accessibility tests for page scaffold

### Test Coverage Targets
- Route validation: 100% line coverage
- Page component: 100% line coverage
- Navigation links: 100% integration coverage

### Accessibility Testing
- Breadcrumb navigation ARIA labels
- Page heading structure validation
- Keyboard navigation testing
- Screen reader announcement testing

### Performance Testing
- Page shell load time (≤ 500ms)
- Navigation transition speed
- Mobile device testing

## QA Results

*To be completed after implementation*

---

**Story Owner:** SM (Bob)  
**Created:** October 10, 2025  
**Epic:** 10 Day-in-Court Checklist  
**Estimated Effort:** 0.5 day  
**Dependencies:** Epic 6 complete (Case Journey Map)
