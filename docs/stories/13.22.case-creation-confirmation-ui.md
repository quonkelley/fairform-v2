# Story 13.22: Case Creation Confirmation UI in Copilot

## Status
âœ… Complete

## Story
**As a** FairForm user,
**I want** to see a clear summary of my case details and be asked to confirm before creating my case,
**so that** I can verify the information is correct and feel confident about proceeding.

## Acceptance Criteria

1. When readiness score reaches 80+, AI Copilot displays a conversational confirmation message
2. Confirmation message shows clear summary of all collected details (case type, location, notice type, etc.)
3. Confirmation UI is embedded in chat flow (no modal popups or page redirects)
4. User can confirm case creation through conversational response ("Yes", "Create my case", etc.)
5. User can decline or defer case creation ("Not yet", "Let me think about it", etc.)
6. User can request edits to specific details before confirming ("Actually, change location to X")
7. Confirmation message is styled distinctively (card-like appearance within chat)
8. After user confirms, system acknowledges and transitions to Story 13.23 (API call)
9. After user declines, conversation continues naturally without pressure
10. Confirmation can be re-triggered if user provides more details or asks to create case

## Tasks / Subtasks

- [ ] Task 1: Create confirmation message component (AC: 2, 3, 7)
  - [ ] Create `components/ai-copilot/CaseConfirmationCard.tsx`
  - [ ] Design card layout with case details summary
  - [ ] Add distinctive styling (border, background, icon)
  - [ ] Support different case types (eviction, small claims)
  - [ ] Make responsive for mobile and desktop
  - [ ] Add TypeScript interfaces for props

- [ ] Task 2: Implement confirmation message generation logic (AC: 1, 2)
  - [ ] Create `lib/ai/confirmationMessages.ts` module
  - [ ] Implement `generateConfirmationMessage()` function
  - [ ] Format case details based on case type
  - [ ] Create conversational summary text
  - [ ] Include all collected details in summary
  - [ ] Add unit tests for message generation

- [ ] Task 3: Integrate readiness detection with confirmation flow (AC: 1, 10)
  - [ ] Modify demo endpoint to detect when to show confirmation
  - [ ] Check readiness score after each message
  - [ ] Trigger confirmation message when score >= 80
  - [ ] Track if confirmation has been shown for this session
  - [ ] Prevent showing confirmation multiple times unless requested
  - [ ] Add state flag: `confirmationShown: boolean`

- [ ] Task 4: Implement confirmation response parsing (AC: 4, 5, 6)
  - [ ] Create `parseConfirmationResponse()` function
  - [ ] Detect affirmative responses ("yes", "create it", "proceed", etc.)
  - [ ] Detect negative responses ("no", "not yet", "cancel", etc.)
  - [ ] Detect edit requests ("change X to Y", "actually, my location is Z")
  - [ ] Return structured response type (confirm | decline | edit)
  - [ ] Add unit tests for various user responses

- [ ] Task 5: Handle confirmation acceptance flow (AC: 8)
  - [ ] Update conversation state when user confirms
  - [ ] Set `confirmed: true` flag in state
  - [ ] Generate acknowledgment message
  - [ ] Prepare for handoff to Story 13.23 (API call)
  - [ ] Update conversation stage to 'case_creation'
  - [ ] Log confirmation event

- [ ] Task 6: Handle confirmation decline flow (AC: 9)
  - [ ] Generate understanding/supportive response
  - [ ] Keep conversation state intact (don't lose details)
  - [ ] Allow user to continue asking questions
  - [ ] Set cooldown before re-offering confirmation (5 minutes or 5 messages)
  - [ ] Log decline event for analytics

- [ ] Task 7: Handle edit requests during confirmation (AC: 6)
  - [ ] Parse which detail user wants to change
  - [ ] Update conversation state with new detail
  - [ ] Regenerate confirmation message with updated details
  - [ ] Re-check readiness score
  - [ ] Show updated confirmation automatically if still ready
  - [ ] Log edit events

- [ ] Task 8: Update ChatPanel to render confirmation cards (AC: 3, 7)
  - [ ] Detect confirmation messages in message stream
  - [ ] Render CaseConfirmationCard for confirmation messages
  - [ ] Distinguish confirmation cards from regular messages
  - [ ] Add message metadata: `type: 'confirmation'`
  - [ ] Handle card interaction events
  - [ ] Test with existing chat UI

- [ ] Task 9: Add comprehensive testing (AC: All)
  - [ ] Test confirmation triggering at 80+ readiness
  - [ ] Test confirmation message content for eviction cases
  - [ ] Test confirmation message content for small claims
  - [ ] Test affirmative response handling
  - [ ] Test negative response handling
  - [ ] Test edit request handling
  - [ ] Test confirmation card rendering
  - [ ] Test mobile responsive layout
  - [ ] Test conversation continuation after decline

## Dev Notes

### Architecture Context
[Source: docs/HANDOFF-NEXT-SESSION.md, docs/prd/epic-13-ai-copilot.md]

This story implements the **user-facing confirmation step** in the case creation flow. After Story 13.21 detects that enough information has been gathered, this story presents that information back to the user in a clear, conversational way and asks for explicit confirmation before proceeding to actually create the case.

**Key Design Principles:**
- Conversational-first (embedded in chat, not modal)
- Clear and transparent (show all collected details)
- User control (easy to confirm, decline, or edit)
- Non-pressuring (graceful decline handling)
- Mobile-friendly (works in chat panel on all devices)

**User Experience Flow:**
1. User shares details in conversation
2. Readiness score reaches 80+ (from Story 13.21)
3. AI generates confirmation message with summary
4. Confirmation card appears in chat
5. User responds conversationally
6. System handles response appropriately

### Existing Chat Panel Structure
[Source: components/ai-copilot/ChatPanel.tsx]

The ChatPanel component already renders messages in a conversation flow. We'll extend it to recognize and render special "confirmation" type messages with a custom card component.

**Current Message Structure:**
```typescript
interface Message {
  id: string;
  author: 'user' | 'assistant';
  content: string;
  timestamp: number;
}
```

**Extended Message Structure:**
```typescript
interface Message {
  id: string;
  author: 'user' | 'assistant';
  content: string;
  timestamp: number;
  type?: 'normal' | 'confirmation'; // NEW
  meta?: ConfirmationMeta;          // NEW
}

interface ConfirmationMeta {
  caseType: string;
  details: {
    location?: string;
    noticeType?: string;
    dateReceived?: string;
    [key: string]: string | undefined;
  };
  readinessScore: number;
}
```

### New Confirmation Card Component

**File Location:** `components/ai-copilot/CaseConfirmationCard.tsx`

**Component Design:**
```typescript
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { CheckCircle2, FileText } from 'lucide-react';

interface CaseConfirmationCardProps {
  caseType: string;
  details: Record<string, string | undefined>;
  onConfirm?: () => void;  // For future interactive buttons
  onDecline?: () => void;   // For future interactive buttons
}

export function CaseConfirmationCard({ 
  caseType, 
  details,
  onConfirm,
  onDecline 
}: CaseConfirmationCardProps) {
  // Format case type for display
  const caseTypeDisplay = caseType === 'eviction' 
    ? 'Eviction Defense' 
    : caseType === 'small_claims'
    ? 'Small Claims'
    : caseType;
  
  return (
    <Card className="border-primary/50 bg-primary/5 my-4">
      <CardHeader>
        <CardTitle className="flex items-center gap-2 text-base">
          <FileText className="h-5 w-5 text-primary" />
          Ready to Create Your Case
        </CardTitle>
      </CardHeader>
      <CardContent className="space-y-3">
        <div className="text-sm space-y-2">
          <p className="font-medium">I've gathered the following information:</p>
          
          <div className="pl-4 space-y-1">
            <div className="flex items-start gap-2">
              <CheckCircle2 className="h-4 w-4 text-green-600 mt-0.5" />
              <div>
                <span className="font-medium">Case Type:</span>{' '}
                <span>{caseTypeDisplay}</span>
              </div>
            </div>
            
            {details.location && (
              <div className="flex items-start gap-2">
                <CheckCircle2 className="h-4 w-4 text-green-600 mt-0.5" />
                <div>
                  <span className="font-medium">Location:</span>{' '}
                  <span>{details.location}</span>
                </div>
              </div>
            )}
            
            {details.noticeType && (
              <div className="flex items-start gap-2">
                <CheckCircle2 className="h-4 w-4 text-green-600 mt-0.5" />
                <div>
                  <span className="font-medium">Notice Type:</span>{' '}
                  <span>{details.noticeType.replace(/-/g, ' ')}</span>
                </div>
              </div>
            )}
            
            {details.dateReceived && (
              <div className="flex items-start gap-2">
                <CheckCircle2 className="h-4 w-4 text-green-600 mt-0.5" />
                <div>
                  <span className="font-medium">Date Received:</span>{' '}
                  <span>{details.dateReceived}</span>
                </div>
              </div>
            )}
            
            {/* Render any other details */}
            {Object.entries(details)
              .filter(([key]) => !['location', 'noticeType', 'dateReceived'].includes(key))
              .filter(([_, value]) => value)
              .map(([key, value]) => (
                <div key={key} className="flex items-start gap-2">
                  <CheckCircle2 className="h-4 w-4 text-green-600 mt-0.5" />
                  <div>
                    <span className="font-medium capitalize">
                      {key.replace(/([A-Z])/g, ' $1').trim()}:
                    </span>{' '}
                    <span>{value}</span>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
        
        <div className="text-sm text-muted-foreground pt-2 border-t">
          <p>
            Would you like me to create your case with this information? 
            You can say "Yes, create my case" to proceed, or let me know 
            if you'd like to change anything first.
          </p>
        </div>
      </CardContent>
    </Card>
  );
}
```

**Styling Notes:**
- Uses existing shadcn Card component
- Primary color accent for visual distinction
- Check icons for completed items
- Responsive layout (stacks well on mobile)
- Accessible (proper ARIA labels, keyboard navigation)

### Confirmation Message Generation

**File Location:** `lib/ai/confirmationMessages.ts`

```typescript
import { ConversationState } from '@/app/api/ai/copilot/demo/route';

export interface ConfirmationMessage {
  content: string;
  type: 'confirmation';
  meta: {
    caseType: string;
    details: Record<string, string | undefined>;
    readinessScore: number;
  };
}

/**
 * Generate a conversational confirmation message with case summary
 */
export function generateConfirmationMessage(
  state: ConversationState
): ConfirmationMessage {
  const { caseType, details } = state;
  const readinessScore = state.readiness?.score || 0;
  
  // Build conversational message
  let content = "Great! I think I have enough information to help you create your case. ";
  
  // Add case type specific message
  if (caseType === 'eviction') {
    content += "Let me summarize what you've told me about your eviction situation:\n\n";
  } else if (caseType === 'small_claims') {
    content += "Let me summarize the details of your small claims matter:\n\n";
  } else {
    content += "Here's what I've gathered:\n\n";
  }
  
  // List collected details
  const detailsList: string[] = [];
  
  if (details.location) {
    detailsList.push(`ðŸ“ **Location:** ${details.location}`);
  }
  
  if (details.noticeType) {
    detailsList.push(`ðŸ“„ **Notice Type:** ${details.noticeType.replace(/-/g, ' ')}`);
  }
  
  if (details.dateReceived) {
    detailsList.push(`ðŸ“… **Date Received:** ${details.dateReceived}`);
  }
  
  // Add any other details
  Object.entries(details)
    .filter(([key]) => !['location', 'noticeType', 'dateReceived'].includes(key))
    .filter(([_, value]) => value)
    .forEach(([key, value]) => {
      const label = key.replace(/([A-Z])/g, ' $1').trim();
      detailsList.push(`â€¢ **${label}:** ${value}`);
    });
  
  content += detailsList.join('\n') + '\n\n';
  
  // Add confirmation request
  content += "**Would you like me to create your case with this information?**\n\n";
  content += "â€¢ Say **\"Yes, create my case\"** to proceed\n";
  content += "â€¢ Or let me know if you'd like to **change any details** first\n";
  content += "â€¢ You can also say **\"Not yet\"** if you need more time";
  
  return {
    content,
    type: 'confirmation',
    meta: {
      caseType: caseType || 'unknown',
      details,
      readinessScore
    }
  };
}

/**
 * Format details for a specific case type
 */
export function formatDetailsForCaseType(
  caseType: string,
  details: Record<string, string | undefined>
): string[] {
  switch (caseType) {
    case 'eviction':
      return [
        details.location && `Location: ${details.location}`,
        details.noticeType && `Notice Type: ${details.noticeType}`,
        details.dateReceived && `Date Received: ${details.dateReceived}`
      ].filter(Boolean) as string[];
    
    case 'small_claims':
      return [
        details.location && `Location: ${details.location}`,
        details.disputeDescription && `Dispute: ${details.disputeDescription}`,
        details.amountInvolved && `Amount: ${details.amountInvolved}`
      ].filter(Boolean) as string[];
    
    default:
      return Object.entries(details)
        .filter(([_, value]) => value)
        .map(([key, value]) => `${key}: ${value}`);
  }
}
```

### Response Parsing Logic

**File Location:** `lib/ai/responseParser.ts` (new file)

```typescript
export type ConfirmationResponseType = 
  | { type: 'confirm' }
  | { type: 'decline' }
  | { type: 'edit'; field: string; newValue: string }
  | { type: 'unclear' };

/**
 * Parse user's response to confirmation message
 */
export function parseConfirmationResponse(
  message: string
): ConfirmationResponseType {
  const lower = message.toLowerCase().trim();
  
  // Affirmative responses
  const affirmativePatterns = [
    /^yes$/i,
    /^yeah$/i,
    /^yep$/i,
    /^sure$/i,
    /^okay$/i,
    /^ok$/i,
    /create.*case/i,
    /go ahead/i,
    /proceed/i,
    /let's do it/i,
    /sounds good/i,
    /that's correct/i,
    /that looks good/i
  ];
  
  if (affirmativePatterns.some(pattern => pattern.test(lower))) {
    return { type: 'confirm' };
  }
  
  // Negative responses
  const negativePatterns = [
    /^no$/i,
    /^nope$/i,
    /not yet/i,
    /not now/i,
    /wait/i,
    /hold on/i,
    /cancel/i,
    /nevermind/i,
    /let me think/i,
    /i need.*time/i
  ];
  
  if (negativePatterns.some(pattern => pattern.test(lower))) {
    return { type: 'decline' };
  }
  
  // Edit requests
  const editPatterns = [
    { pattern: /(?:change|update|correct|fix).*location.*(?:to|is)\s+(.+)/i, field: 'location' },
    { pattern: /(?:actually|correction)[,:]?\s*(?:my )?location\s+(?:is|should be)\s+(.+)/i, field: 'location' },
    { pattern: /(?:change|update|correct).*notice.*(?:to|is)\s+(.+)/i, field: 'noticeType' },
    { pattern: /(?:received|got).*(?:today|yesterday|last week|[\d]+ days? ago)/i, field: 'dateReceived' },
  ];
  
  for (const { pattern, field } of editPatterns) {
    const match = message.match(pattern);
    if (match) {
      const newValue = match[1]?.trim() || match[0];
      return { type: 'edit', field, newValue };
    }
  }
  
  // If unclear, return unclear type
  return { type: 'unclear' };
}

/**
 * Generate response to unclear confirmation response
 */
export function generateUnclearResponse(): string {
  return "I'm not sure if you'd like to proceed with creating your case. " +
    "Please let me know:\n\n" +
    "â€¢ Say **\"Yes\"** to create your case\n" +
    "â€¢ Say **\"No\"** if you need more time\n" +
    "â€¢ Or tell me what you'd like to change";
}
```

### Integration with Demo Endpoint

**Modifications to `app/api/ai/copilot/demo/route.ts`:**

```typescript
import { 
  analyzeConversationState, 
  shouldRecheckReadiness 
} from '@/lib/ai/intentDetection';
import { 
  generateConfirmationMessage 
} from '@/lib/ai/confirmationMessages';
import {
  parseConfirmationResponse,
  generateUnclearResponse
} from '@/lib/ai/responseParser';

// Extend ConversationState
interface ConversationState {
  stage: 'greeting' | 'intake' | 'details' | 'guidance' | 'awaiting_confirmation' | 'case_creation';
  caseType?: string;
  context: string[];
  details: { [key: string]: string | undefined };
  readiness?: CaseCreationReadiness;
  confirmationShown?: boolean;  // NEW: Track if confirmation was shown
  confirmed?: boolean;           // NEW: Track if user confirmed
  lastConfirmationTime?: number; // NEW: Cooldown tracking
}

function generateDemoResponse(userMessage: string, sessionId: string, history: string[]): string {
  // ... existing code ...
  
  // Check readiness after extracting details
  extractDetails(message, state);
  
  // Check if we should evaluate readiness
  if (shouldRecheckReadiness(state.readiness || null, state)) {
    const readiness = analyzeConversationState(state);
    state.readiness = readiness;
    
    console.log('Readiness updated:', readiness);
  }
  
  // Handle awaiting confirmation stage
  if (state.stage === 'awaiting_confirmation') {
    const response = parseConfirmationResponse(message);
    
    switch (response.type) {
      case 'confirm':
        state.confirmed = true;
        state.stage = 'case_creation';
        return "Perfect! I'm creating your case now. This will just take a moment...\n\n" +
          "(Story 13.23 will handle the actual API call to create the case)";
      
      case 'decline':
        state.stage = 'guidance';
        state.confirmationShown = false;
        state.lastConfirmationTime = Date.now();
        return "No problem at all! Take your time. I'm here whenever you're ready. " +
          "Feel free to ask me any other questions about your situation, or let me know " +
          "when you'd like to create your case.";
      
      case 'edit':
        // Update the detail
        state.details[response.field] = response.newValue;
        console.log(`Updated ${response.field} to: ${response.newValue}`);
        
        // Re-check readiness
        const newReadiness = analyzeConversationState(state);
        state.readiness = newReadiness;
        
        // Show updated confirmation if still ready
        if (newReadiness.isReady) {
          const confirmMsg = generateConfirmationMessage(state);
          return `Got it! I've updated your ${response.field}.\n\n${confirmMsg.content}`;
        } else {
          state.stage = 'details';
          return `I've updated your ${response.field} to "${response.newValue}". ` +
            `Let me know when you're ready to create your case.`;
        }
      
      case 'unclear':
        return generateUnclearResponse();
    }
  }
  
  // Check if we should show confirmation
  if (
    state.readiness?.isReady && 
    !state.confirmationShown && 
    !state.confirmed &&
    state.stage !== 'awaiting_confirmation' &&
    shouldShowConfirmation(state)
  ) {
    state.confirmationShown = true;
    state.stage = 'awaiting_confirmation';
    
    const confirmMsg = generateConfirmationMessage(state);
    console.log('Showing confirmation message');
    
    return confirmMsg.content;
  }
  
  // ... rest of existing response logic ...
}

/**
 * Determine if we should show confirmation based on cooldown
 */
function shouldShowConfirmation(state: ConversationState): boolean {
  // If never shown, always show
  if (!state.lastConfirmationTime) return true;
  
  // Check cooldown (5 minutes)
  const timeSinceLastConfirmation = Date.now() - state.lastConfirmationTime;
  const cooldownMs = 5 * 60 * 1000; // 5 minutes
  
  return timeSinceLastConfirmation > cooldownMs;
}
```

### ChatPanel Integration

**Modifications to `components/ai-copilot/ChatPanel.tsx`:**

```typescript
import { CaseConfirmationCard } from './CaseConfirmationCard';

// In message rendering logic
{messages.map((message) => {
  if (message.type === 'confirmation' && message.meta) {
    return (
      <div key={message.id} className="flex justify-start mb-4">
        <div className="max-w-[85%]">
          <CaseConfirmationCard
            caseType={message.meta.caseType}
            details={message.meta.details}
          />
          <div className="text-xs text-muted-foreground mt-1 px-2">
            {new Date(message.timestamp).toLocaleTimeString()}
          </div>
        </div>
      </div>
    );
  }
  
  // Regular message rendering
  return (
    <div key={message.id} className={/* ... existing logic ... */}>
      {/* ... existing message rendering ... */}
    </div>
  );
})}
```

### User Experience Flows

**Flow 1: Happy Path (User Confirms)**
```
1. User: "I received a 30-day eviction notice"
2. AI: [Extracts details, readiness = 85]
3. AI: [Shows confirmation card]
   "Great! I have enough information...
    ðŸ“ Location: Indianapolis, IN
    ðŸ“„ Notice Type: 30-day
    Would you like me to create your case?"
4. User: "Yes, create my case"
5. AI: "Perfect! Creating your case now..."
6. [Transitions to Story 13.23 - API call]
```

**Flow 2: User Declines**
```
1. [Confirmation shown]
2. User: "Not yet, let me think about it"
3. AI: "No problem at all! Take your time..."
4. [Conversation continues normally]
5. [Cooldown: 5 minutes before re-offering]
```

**Flow 3: User Requests Edit**
```
1. [Confirmation shown with Location: Indianapolis]
2. User: "Actually, change location to Fort Wayne"
3. AI: [Updates location]
4. AI: "Got it! I've updated your location."
   [Shows updated confirmation card]
5. User: "Yes, that's correct"
6. [Proceeds to case creation]
```

**Flow 4: Unclear Response**
```
1. [Confirmation shown]
2. User: "Hmm, maybe"
3. AI: "I'm not sure if you'd like to proceed...
   Please let me know:
   â€¢ Say 'Yes' to create your case
   â€¢ Say 'No' if you need more time"
4. [Waits for clearer response]
```

### Source Tree

```
components/ai-copilot/
â”œâ”€â”€ ChatPanel.tsx              # MODIFIED: Render confirmation cards
â”œâ”€â”€ ChatWidget.tsx             # EXISTING: No changes
â”œâ”€â”€ CaseConfirmationCard.tsx   # NEW: Confirmation card component
â””â”€â”€ CaseConfirmationCard.test.tsx # NEW: Component tests

lib/ai/
â”œâ”€â”€ intentDetection.ts         # EXISTING: From Story 13.21
â”œâ”€â”€ confirmationMessages.ts    # NEW: Generate confirmation messages
â”œâ”€â”€ confirmationMessages.test.ts # NEW: Tests
â”œâ”€â”€ responseParser.ts          # NEW: Parse user responses
â””â”€â”€ responseParser.test.ts     # NEW: Tests

app/api/ai/copilot/
â””â”€â”€ demo/
    â””â”€â”€ route.ts              # MODIFIED: Handle confirmation flow
```

### Testing

**Test Location:** 
- `components/ai-copilot/CaseConfirmationCard.test.tsx`
- `lib/ai/confirmationMessages.test.ts`
- `lib/ai/responseParser.test.ts`

**Test Coverage:**

```typescript
describe('CaseConfirmationCard', () => {
  it('renders case type and location', () => {
    render(
      <CaseConfirmationCard
        caseType="eviction"
        details={{ location: 'Indianapolis, IN' }}
      />
    );
    expect(screen.getByText('Eviction Defense')).toBeInTheDocument();
    expect(screen.getByText('Indianapolis, IN')).toBeInTheDocument();
  });
  
  it('renders all provided details with check icons', () => {
    const details = {
      location: 'Indianapolis, IN',
      noticeType: '30-day',
      dateReceived: 'today'
    };
    render(<CaseConfirmationCard caseType="eviction" details={details} />);
    
    const checkIcons = screen.getAllByTestId('check-icon');
    expect(checkIcons).toHaveLength(3);
  });
});

describe('confirmationMessages', () => {
  it('generates message with all details for eviction', () => {
    const state = {
      stage: 'details',
      caseType: 'eviction',
      context: [],
      details: {
        location: 'Indianapolis, IN',
        noticeType: '30-day'
      }
    };
    
    const msg = generateConfirmationMessage(state);
    expect(msg.type).toBe('confirmation');
    expect(msg.content).toContain('eviction');
    expect(msg.content).toContain('Indianapolis');
    expect(msg.meta.caseType).toBe('eviction');
  });
});

describe('responseParser', () => {
  it('detects affirmative responses', () => {
    expect(parseConfirmationResponse('Yes')).toEqual({ type: 'confirm' });
    expect(parseConfirmationResponse('create my case')).toEqual({ type: 'confirm' });
    expect(parseConfirmationResponse('go ahead')).toEqual({ type: 'confirm' });
  });
  
  it('detects negative responses', () => {
    expect(parseConfirmationResponse('not yet')).toEqual({ type: 'decline' });
    expect(parseConfirmationResponse('no')).toEqual({ type: 'decline' });
    expect(parseConfirmationResponse('let me think')).toEqual({ type: 'decline' });
  });
  
  it('detects edit requests', () => {
    const result = parseConfirmationResponse('change location to Fort Wayne');
    expect(result.type).toBe('edit');
    expect(result.field).toBe('location');
    expect(result.newValue).toBe('Fort Wayne');
  });
});
```

### Dependencies
- Story 13.21 (Intent Detection) - provides readiness assessment
- Existing ChatPanel component
- shadcn Card component
- lucide-react icons

### Performance Considerations
- Confirmation card is lightweight (no heavy computations)
- Response parsing is synchronous and fast (<1ms)
- No additional API calls
- State updates are minimal

### Accessibility
- Card component uses semantic HTML
- Proper ARIA labels for interactive elements
- Keyboard navigation support
- Screen reader friendly text
- Sufficient color contrast

### Mobile Considerations
- Card responsive (max-width 85% on mobile)
- Touch-friendly (no hover-only interactions)
- Readable text sizes
- Stacks details vertically
- No horizontal scroll required

### Next Steps
This story enables:
- **Story 13.23:** Use `confirmed: true` state to trigger actual API call
- **Story 13.25:** Pass confirmation context between Copilot and intake page
- Future: Add interactive buttons to confirmation card (optional enhancement)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-14 | 1.0 | Initial story creation for case creation confirmation UI | Sarah (Product Owner) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent during implementation_

### Debug Log References
_To be populated by dev agent during implementation_

### Completion Notes List
_To be populated by dev agent during implementation_

### File List
_To be populated by dev agent during implementation_

## QA Results
_To be populated by QA agent after implementation review_

